{% extends base %}

{% load base36 %}

{% block title %}{{ query }} search results - Archfinch{% endblock %}

{% block content %}

<div id="content_left">
{% if results %}
    Search results for <b>{{ query }}</b>
{% else %}
    No results for <b>{{ query }}</b>
{% endif %}

<br />
<br />

{% for result in results %}
    {% with result.id as item_id %} 
    {% with 1 as yr_big %}
    {% with 1 as terse_layout %}
    {% with result.name as item_name %}
    {% with result.category.element_singular as category_singular %}
    {% with result.rating as your_rating %}
    {% with forloop.counter as seq_term %}
        {% include "includes/opinionbox.html" %}
    {% endwith %}
    {% endwith %}
    {% endwith %}
    {% endwith %}
    {% endwith %}
    {% endwith %}
    {% endwith %}
{% endfor %}

<span class="smalltext">
{% if left > 0 %}
    <p>There {{ left|pluralize:"is,are" }} {{ left }} more result{{ left|pluralize }}.
    {% if left <= 10 %}
        <a href="/search?q={{ query|urlencode }}&s={{ start|add:n }}&n=10">Show {{ left|pluralize:"it,them" }}</a>.
    {% else %}
        {# Sorry for the long line, this is for great justice^W^Wproper punctuation #}
        Show the next <a href="/search?q={{ query|urlencode }}&s={{ start|add:n }}&n=10">10</a>{% if left > 10 %}, <a href="/search?q={{ query|urlencode }}&s={{ start|add:n }}&n=25">{% if left < 25 %}{{ left }}{% else %}25{% endif %}</a>{% endif %}{% if left > 25 %}, <a href="/search?q={{ query|urlencode }}&s={{ start|add:n }}&n=100">{% if left < 100 %}{{ left }}{% else %}100{% endif %}</a>{% endif %}.
    {% endif %}
    </p>
{% endif %}
<p>Are we missing something? Please <a href="{% url missing %}">add it</a>!</p>
</span>
</div>
<div id="content_right">
    {% if category_counts|length > 1 %}
        <p>Show:</p>
        <p>
        {% for c in category_counts %}
            <a href='/search?q={{ title|urlencode }}%20in:{{ c.category.slug|urlencode }}'>{{ c.category.element_plural }}</a> {% if c.count >= 1000 %}1000+{% else %}{{ c.count }}{% endif %} <br />
        {% endfor %}
        </p>
    {% endif %}
    <div class="smalltext">
        <br />
        <div class="show">
            <p>(<a href="#" class="showhide">search help</a>)</p>
        </div>
        <div class="hide" style='color: black'>
            <p><b>Search help</b></p>
            <p>
            Phrases: <a href="/search?q={{ "\"lion king\""|urlencode }}">"lion king"</a> <br />
            Filter by category: <a href="/search?q={{ "angel in:tv-shows"|urlencode }}">angel in:tv-shows</a> <br />
            Exclude words: <a href="/search?q={{ "dexter -laboratory"|urlencode }}">dexter -laboratory</a> <br />
            One OR the other: <a href="/search?q={{ "sonic | mario"|urlencode }}">sonic | mario</a> <br />
            Title start: <a href="/search?q={{ "^hannibal"|urlencode }}">^hannibal</a><br />
            Title end: <a href="/search?q={{ "of doom$"|urlencode }}">of doom$</a><br />
            Word wildcards: <a href="/search?q={{ "alumin*"|urlencode }}">alumin*</a><br />
            </p>
            <p>(<a href="#" class="showhide">hide</a>)</p>
        </div>
    </div>
</div>

{% endblock %}
{% block media %}
{% include "includes/generate_lists_tip.html" %}
{% endblock %}
